!function(n,o,s,a){"use strict";var t=[20,20],i=[0,0],r={crosshairs:n.divIcon({className:"map-sync-cursor-icon icon-crosshairs",iconSize:t}),cross:n.divIcon({className:"map-sync-cursor-icon icon-cross",iconSize:t}),grab:n.divIcon({className:"map-sync-cursor-icon icon-grab",iconSize:t}),hand:n.divIcon({className:"map-sync-cursor-icon icon-hand",iconSize:t}),cursor:n.divIcon({className:"map-sync-cursor-icon icon-cursor",iconSize:t,iconAnchor:i}),"cursor-full":n.divIcon({className:"map-sync-cursor-icon icon-cursor-full",iconSize:t,iconAnchor:i})};n.MapSync=n.Class.extend({options:{shadowCursor:"hand"},initialize:function(o){n.setOptions(this,o),this.list=[],this.onlySetViewOnTarget=!1},add:function(o,s){s=n.Util.extend(s||{},{}),this.list.push(o),this.masterMap=this.masterMap?this.masterMap:o,o!=this.masterMap&&o.setView(this.masterMap.getCenter(),this.masterMap.getZoom(),{animate:!1,reset:!0}),o.mapSync=this,o.mapSync_cursorMarker=n.marker(o.getCenter()).addTo(o),this.options.shadowCursor=r[this.options.shadowCursor]?this.options.shadowCursor:"hand",this._changeCursor(this.options.shadowCursor),o._panes.markerPane.removeChild(o.mapSync_cursorMarker._icon),o._panes.popupPane.appendChild(o.mapSync_cursorMarker._icon),o.mapSync_cursorMarker._icon.style.zIndex=1e3,o.on("mouseover",function(){this.mapSync._forEachMap(function(o){n.DomUtil.addClass(o.getContainer(),"map-sync-passive")},null,this)}),o.on("mouseout",function(){this.mapSync._forEachMap(function(o){n.DomUtil.removeClass(o.getContainer(),"map-sync-passive")})}),o.on("mousemove",function(n){this.mapSync._forEachMap(function(n,o){n.mapSync_cursorMarker.setLatLng(o)},[n.latlng])}),o.on("zoomend",function(){this.mapSync._forEachMap(function(n,o){n.setView(o.getCenter(),o.getZoom(),{animate:!1,reset:!1})},this,this)}),o.on("dragstart",function(){this.mapSync._changeCursor("grab")}),o.on("dragend",function(){this.mapSync._changeCursor(this.mapSync.options.shadowCursor)}),n.extend(o,{setView:function(){return this.mapSync.onlySetViewOnTarget?n.Map.prototype.setView.apply(this,arguments):this.mapSync._forEachMap(function(o,s){n.Map.prototype.setView.apply(o,s)},arguments),this},panBy:function(){return this.mapSync._forEachMap(function(o,s){n.Map.prototype.panBy.apply(o,s)},arguments),this},_onResize:function(){return this.mapSync._forEachMap(function(o,s){n.Map.prototype._onResize.apply(o,s)},arguments),this}}),o.dragging._draggable._updatePosition=function(){n.Draggable.prototype._updatePosition.call(this),o.mapSync._forEachMap(function(o,s){n.DomUtil.setPosition(o.dragging._draggable._element,s._newPos),o.fire("moveend")},this,o)},o.boxZoom._finish=function(){this._map.mapSync.onlySetViewOnTarget=!0,n.Map.BoxZoom.prototype._finish.call(this)},o.on("boxzoomend",function(){this.mapSync.onlySetViewOnTarget=!1})},_forEachMap:function(n,o,s){var t,i,r;for(t=0;t<this.list.length;t++)i=this.list[t],i!=s&&(r=[i],n.apply(a,r.concat(o)))},_changeCursor:function(n){var o=r[n];o&&this._forEachMap(function(n,o){n.mapSync_cursorMarker.setIcon(o)},[o])}})}(L,this,document);