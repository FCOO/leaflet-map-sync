<!DOCTYPE html>
<html>
<head>
	<title>fcoo.dk - leaflet-map-sync - Demo</title>
	<meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta http-equiv='x-dns-prefetch-control' content='on'>

	<meta name='copyright' content='FCOO'>
	<meta name='owner' content='FCOO'>

  <link  href="bower_components.css" rel="stylesheet">	
  <link  href="../src/leaflet-map-sync.css" rel="stylesheet">	
	<style>
		.map-container {
			width: 300px; 
			height: 400px;
			border: 2px solid black;
			margin: 4px;
			float:left;
		}

		.map-sync-mouseover {
			border: 2px solid red !important;
		}

	</style>
</head>

<body>
	<div id="map" class="map-container"></div>
	<div id="map2" class="map-container"></div>
	<div id="map3" class="map-container"></div>
	<div style="float:left;width:100%">
		<button id="enableMap1">Enable #1</button>
		<button id="disableMap1">Disable #1</button>
	</div>

	<script src="bower_components.js"></script>
	<script src="../src/leaflet-map-sync.js"></script>

	<script>
		L.Icon.Default.imagePath = '\images';
		var mapSync = new L.MapSync({ shadowCursor:'cursor' });

		var map1 = L.map('map').setView([51.505, -0.09], 13);
			L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
				maxZoom: 14, 
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors</a>'
      }).addTo(map1);

		$('#enableMap1').click( function(){ mapSync.enable( map1 ); });
		$('#disableMap1').click( function(){ mapSync.disable( map1 ); });

		L.circle([51.508, -0.11], 500, {
			color: 'red',
			fillColor: '#f03',
			fillOpacity: 0.5
		}).addTo(map1).bindPopup("I am a circle.");

		L.polygon([
			[51.509, -0.08],
			[51.503, -0.06],
			[51.51, -0.047]
		]).addTo(map1).bindPopup("I am a polygon.");


		function openPopup1( e ) {
			var popup = L.popup();
			popup
				.setLatLng(e.latlng)
				.setContent("You clicked the map at <br>" + e.latlng.toString()+'<br><button id="enableMap1_1">Enable #1</button><button id="disableMap1_1">Disable #1</button>')
				.openOn(map1);
			$('#enableMap1_1').click( function(){ mapSync.enable( map1 ); });
			$('#disableMap1_1').click( function(){ mapSync.disable( map1 ); });

		}
		map1.on('click', openPopup1 );

		//*************************************************************		
		var map2 = L.map('map2').setView([0, 0], 10);
		
//		L.tileLayer(
//			'http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', 
//			{ maxZoom: 14, attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'}
//		).addTo(map2);
			L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
				maxZoom: 14, 
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors</a>'
      }).addTo(map2);

		function openPopup2( e ) {
			var popup = L.popup();
			popup
				.setLatLng(e.latlng)
				.setContent("You clicked the map at <br>" + e.latlng.toString()+'<br><button id="enableMap1_2">Enable #1</button><button id="disableMap1_2">Disable #1</button>')
				.openOn(map2);
			$('#enableMap1_2').click( function(){ mapSync.enable( map1 ); });
			$('#disableMap1_2').click( function(){ mapSync.disable( map1 ); });

		}
		map2.on('click', openPopup2 );


		//*************************************************************		
		var map3 = L.map('map3').setView([20, 20], 13);

//		L.tileLayer(
//			'http://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', 
//			{	maxZoom: 14, attribution: 'Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}
//		).addTo(map3);
			L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
				maxZoom: 14, 
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors</a>'
      }).addTo(map3);

		function openPopup3( e ) {
			var popup = L.popup();
			popup
				.setLatLng(e.latlng)
				.setContent("You clicked the map at <br>" + e.latlng.toString()+'<br><button id="enableMap1_3">Enable #1</button><button id="disableMap1_3">Disable #1</button>')
				.openOn(map3);
			$('#enableMap1_3').click( function(){ mapSync.enable( map1 ); });
			$('#disableMap1_3').click( function(){ mapSync.disable( map1 ); });

		}
		map3.on('click', openPopup3 );

		//*************************************************************		
		mapSync.add(map1);
		mapSync.add(map2);
		mapSync.add(map3);

//map1.on('viewreset movestart move	moveend	dragstart	drag dragend zoomstart zoomend zoomlevelschange	resize autopanstart', function( event ){
//map1.on('zoomstart viewreset moveend	dragend zoomend resize autopanstart', function( event ){
//	console.log(event.type);
//});


	</script>
</body>
</html>
